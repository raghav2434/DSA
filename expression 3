#include<stdio.h>
#include<stdlib.h>
#include<ctype.h>
#include<string.h>

int precedence(char op){
    switch(op){
        case'+':
        case'-':
            return 1;
        case'*':
        case'/':
            return 2;
        case'^':
            return 3;
        default:
            return 0;
    }
}
char* convertInfixToPostfix(char* infixExp){
    int len = strlen(infixExp), top=-1,x=0;
    char* postfix=(char*)malloc(len+1);
    char operator[len];
    for(int i=0;i<len;i++){
        char ch = infixExp[i];
        if(isalnum(ch)){
            postfix[x++]=ch;
        }
        else if(ch=='+' || ch=='-' || ch=='*'|| ch=='^'||ch=='/'){
            while(top!=-1 && precedence(ch)<=precedence(operator[top]) && ch!='^')
                postfix[x++]=operator[top--];
        }
        else if(ch=='('){
            operator[++top]=ch;
        }

        else if(ch==')'){
            while(operator[top]!='(')
            postfix[x++]=operator[top--];
            top--;
        }
}
while(top!=-1)
    postfix[x++]=operator[top--];
    postfix[x]='\0';
    return postfix;
}
char* convertInfixToPrefix(char* infixExp){
    int len = strlen(infixExp),top=-1,x=0;
    char* prefix = (char*)malloc(len+1);
    char* operator[len];
    for(int i=len-1;i>=0;i--){
        char ch=infixExp[i];
        if(isalnum(ch)){
            prefix[x++]=ch;
        }
        else if(ch=='+' || ch=='-' || ch=='*'|| ch=='^'||ch=='/'){
            while(top!=-1 && precedence(ch)<=precedence(operator[top]) && ch!='^')
                prefix[x++]=operator[top--];
                operator[++top]=ch;
        }
        else if(ch=='('){
            operator[++top]=ch;
        }

        else if(ch==')'){
            while(operator[top]!='(')
            prefix[x++]=operator[top--];
            top--;
        }
    }
    while(top!=-1)
    prefix[x++]=operator[top--];
    prefix[x]='\0';
    strrev(prefix);
    return prefix;
}
